
{% extends "base.html" %}
{% load staticfiles %}
{% block extra_head%}
<<<<<<< HEAD
    <meta charset="utf-8">
    <script language="javascript" type="text/javascript" src="{% static "chat_client.js" %}" ></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 
=======
>>>>>>> e884dbaded0942ea3f6847c748c4a62980b3f717
    
    <form method="POST" name="enterText">
        {% if request.session.username %}
        <input type="hidden" id="userName" value="{{request.session.username}}"></input>
        {% else %}
        <input type="hidden" id="userName" value="Anonyme"></input>
        {% endif %}
        <input type="hidden" id="chatid" value="{{event.id}}"></input>
        <input type="hidden" id="textToSend"></input>
        <input type="hidden" id="currentTime"></input>
        {% csrf_token %}
    </form>
{% endblock extra_head%}

{% block mEvts%}active{% endblock %}
{% block content%}

<H1>  {{event.Name}} </H1>

<div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
          Description
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse">
      <div class="panel-body">
        {{event.Description}}
        </div>
    </div>
  </div>
  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
          Chat
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse in">
      <div class="panel-body" id="chatMessagesdiv_1">
        <!-- HTML of messages goes in that div -->
      </div>
    <textarea id="chatinputTA" class="chatTA"
    onkeyup="if(event.keyCode==13 && !event.shiftKey){ enterMessage('chatinputTA');}"></textarea>
    
    <button class="sendbtn"  onclick="enterMessage('chatinputTA');">Envoyer</button>

    <iframe id="blankIframe" height="0" width="0" style="display:none;" tabindex="-1"></iframe>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
          Service
        </a>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse">
      <div class="panel-body">
        <p>Machin propose a (18h25): covoiturage 2$ Lennox depart dans 4min</p>
        <p class = "right"><button type="button" class="btn btn-default btn"><span class="glyphicon glyphicon-plus"></span> Ajouter un service</button></p>
      </div>
    </div>
  </div>
  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour" onclick="findAddress()">
          Carte
        </a>
      </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse">
      <div class="panel-body">
<<<<<<< HEAD
        
 
        <div id="map" style="width: 100%; height: 400px;"></div>
 <script type="text/javascript">
       function findAddress() {	   
		//window.alert({{event.Adress}});
	   //var address = {{event.Adress}};
	   var address = 'London, UK';
	   
	   
	   var myCenter=new google.maps.LatLng({{event.Latitude}}, {{event.Longitude}});
	   var marker;

	   
	       var mapProp = {
	           center:myCenter,
	           zoom:15,
	           mapTypeId:google.maps.MapTypeId.HYBRID
	       };
=======
        <div id="map" style="width: 400px; height: 300px;"></div>
        <script type="text/javascript">
	   //var address = document.getElementById('address').value;
		/*var address = {{event.Adress}};
	  
		var map = new google.maps.Map(document.getElementById('map'), { 
			mapTypeId: google.maps.MapTypeId.TERRAIN,
			zoom: 80
		});
>>>>>>> e884dbaded0942ea3f6847c748c4a62980b3f717

	       var map = new google.maps.Map(document.getElementById("map"),mapProp);

<<<<<<< HEAD
	       marker = new google.maps.Marker({
	           position:myCenter,
	       });

	       marker.setMap(map);
	  
 }
        //google.maps.event.trigger(map, "resize");
=======
		geocoder.geocode({
			'address': address
		}, function(results, status) {
				if(status == google.maps.GeocoderStatus.OK) {
					new google.maps.Marker({
						position: results[0].geometry.location,
						map: map
				});
		 map.setCenter(results[0].geometry.location);
				}
			});*/
>>>>>>> e884dbaded0942ea3f6847c748c4a62980b3f717
</script>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block extra_script %}
<script language="javascript" type="text/javascript" src="{% static "chat_client.js" %}" ></script>
{% endblock %}